<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Server Status - Marketing Agent Backend</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #4361ee;
      --primary-dark: #3a56d4;
      --secondary: #6c757d;
      --success: #28a745;
      --warning: #ffc107;
      --danger: #dc3545;
      --light: #f8f9fa;
      --dark: #212529;
      --border: #dee2e6;
    }
    
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }
    
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: var(--dark);
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
      min-height: 100vh;
      padding: 20px;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    
    header {
      background: rgba(255, 255, 255, 0.95);
      padding: 25px;
      border-radius: 12px;
      margin-bottom: 25px;
      text-align: center;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.15);
    }
    
    h1 {
      color: var(--primary);
      font-size: 2.8rem;
      margin-bottom: 10px;
    }
    
    .subtitle {
      color: var(--secondary);
      font-size: 1.2rem;
      margin-bottom: 15px;
    }
    
    .dashboard {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 25px;
      margin-bottom: 30px;
    }
    
    .card {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 12px;
      padding: 25px;
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s ease;
    }
    
    .card:hover {
      transform: translateY(-5px);
    }
    
    .card-header {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border);
    }
    
    .card-icon {
      width: 50px;
      height: 50px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-right: 15px;
      color: white;
      font-size: 1.5rem;
    }
    
    .card-title {
      font-size: 1.4rem;
      font-weight: 600;
      color: var(--dark);
    }
    
    .status-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid #f1f3f4;
    }
    
    .status-item:last-child {
      border-bottom: none;
    }
    
    .status-label {
      font-weight: 500;
      color: var(--secondary);
    }
    
    .status-value {
      font-weight: 600;
    }
    
    .status-online {
      color: var(--success);
    }
    
    .status-offline {
      color: var(--danger);
    }
    
    .status-warning {
      color: var(--warning);
    }
    
    .endpoints {
      margin-top: 20px;
    }
    
    .endpoint-list {
      list-style: none;
    }
    
    .endpoint-list li {
      padding: 10px 15px;
      background: #f8fafc;
      margin-bottom: 8px;
      border-radius: 6px;
      font-family: monospace;
      display: flex;
      align-items: center;
    }
    
    .endpoint-method {
      display: inline-block;
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8rem;
      font-weight: 600;
      margin-right: 10px;
      min-width: 60px;
      text-align: center;
    }
    
    .method-get {
      background: #e3f2fd;
      color: var(--primary);
    }
    
    .method-post {
      background: #e8f5e9;
      color: var(--success);
    }
    
    .actions {
      display: flex;
      gap: 15px;
      margin-top: 20px;
    }
    
    .btn {
      flex: 1;
      padding: 12px 20px;
      border: none;
      border-radius: 8px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }
    
    .btn-primary {
      background: var(--primary);
      color: white;
    }
    
    .btn-primary:hover {
      background: var(--primary-dark);
    }
    
    .btn-secondary {
      background: #f1f5f9;
      color: var(--secondary);
    }
    
    .btn-secondary:hover {
      background: #e2e8f0;
    }
    
    .logs-container {
      background: rgba(0, 0, 0, 0.8);
      color: #00ff00;
      padding: 20px;
      border-radius: 8px;
      font-family: monospace;
      height: 200px;
      overflow-y: auto;
      margin-top: 30px;
    }
    
    .log-entry {
      margin-bottom: 8px;
      line-height: 1.4;
    }
    
    .log-time {
      color: #888;
      margin-right: 10px;
    }
    
    .spinner {
      width: 24px;
      height: 24px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top-color: #fff;
      animation: spin 1s ease-in-out infinite;
      display: inline-block;
    }
    
    @keyframes spin {
      to { transform: rotate(360deg); }
    }
    
    .notification {
      position: fixed;
      top: 20px;
      right: 20px;
      padding: 15px 20px;
      border-radius: 8px;
      color: white;
      font-weight: 600;
      opacity: 0;
      transform: translateX(100%);
      transition: all 0.5s ease;
      z-index: 1000;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    
    .notification.show {
      opacity: 1;
      transform: translateX(0);
    }
    
    .notification.success {
      background: var(--success);
    }
    
    .notification.error {
      background: var(--danger);
    }
    
    footer {
      text-align: center;
      margin-top: 40px;
      color: white;
      font-size: 0.9rem;
      opacity: 0.8;
    }
    
    @media (max-width: 768px) {
      .dashboard {
        grid-template-columns: 1fr;
      }
      
      .actions {
        flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>Marketing Agent Backend</h1>
      <p class="subtitle">Server Status Dashboard</p>
    </header>
    
    <div class="dashboard">
      <div class="card">
        <div class="card-header">
          <div class="card-icon">
            <i class="fas fa-server"></i>
          </div>
          <div class="card-title">Server Status</div>
        </div>
        <div class="status-item">
          <span class="status-label">API Status:</span>
          <span class="status-value status-online" id="api-status">Online</span>
        </div>
        <div class="status-item">
          <span class="status-label">Environment:</span>
          <span class="status-value">Production</span>
        </div>
        <div class="status-item">
          <span class="status-label">Uptime:</span>
          <span class="status-value" id="uptime">00:00:00</span>
        </div>
        <div class="status-item">
          <span class="status-label">Last Check:</span>
          <span class="status-value" id="last-check">Just now</span>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-icon">
            <i class="fas fa-bolt"></i>
          </div>
          <div class="card-title">API Resources</div>
        </div>
        <div class="status-item">
          <span class="status-label">OpenAI API:</span>
          <span class="status-value status-online" id="openai-status">Connected</span>
        </div>
        <div class="status-item">
          <span class="status-label">Memory Usage:</span>
          <span class="status-value" id="memory-usage">0 MB</span>
        </div>
        <div class="status-item">
          <span class="status-label">Response Time:</span>
          <span class="status-value" id="response-time">0 ms</span>
        </div>
        <div class="status-item">
          <span class="status-label">Requests Today:</span>
          <span class="status-value" id="request-count">0</span>
        </div>
      </div>
      
      <div class="card">
        <div class="card-header">
          <div class="card-icon">
            <i class="fas fa-plug"></i>
          </div>
          <div class="card-title">API Endpoints</div>
        </div>
        <div class="endpoints">
          <ul class="endpoint-list">
            <li>
              <span class="endpoint-method method-post">POST</span>
              <span>/api/generate-content</span>
            </li>
            <li>
              <span class="endpoint-method method-get">GET</span>
              <span>/api/health</span>
            </li>
            <li>
              <span class="endpoint-method method-get">GET</span>
              <span>/api/status</span>
            </li>
            <li>
              <span class="endpoint-method method-get">GET</span>
              <span>/api/campaigns</span>
            </li>
          </ul>
        </div>
      </div>
    </div>
    
    <div class="actions">
      <button class="btn btn-primary" id="check-now-btn">
        <i class="fas fa-sync-alt"></i> Check Status Now
      </button>
      <button class="btn btn-secondary" id="view-frontend-btn">
        <i class="fas fa-external-link-alt"></i> Go to Frontend
      </button>
    </div>
    
    <div class="logs-container" id="server-logs">
      <div class="log-entry">
        <span class="log-time">[12:34:56]</span> Server started successfully
      </div>
      <div class="log-entry">
        <span class="log-time">[12:35:01]</span> Connected to OpenAI API
      </div>
      <div class="log-entry">
        <span class="log-time">[12:35:45]</span> Received first API request
      </div>
      <div class="log-entry">
        <span class="log-time">[12:36:22]</span> Content generated for user #123
      </div>
    </div>
    
    <footer>
      <p>Marketing Agent Backend &copy; 2023 | Render Deployment</p>
    </footer>
  </div>

  <div id="notification" class="notification"></div>

  <script>
    // DOM elements
    const apiStatus = document.getElementById('api-status');
    const uptimeElement = document.getElementById('uptime');
    const lastCheckElement = document.getElementById('last-check');
    const openaiStatus = document.getElementById('openai-status');
    const memoryUsageElement = document.getElementById('memory-usage');
    const responseTimeElement = document.getElementById('response-time');
    const requestCountElement = document.getElementById('request-count');
    const checkNowBtn = document.getElementById('check-now-btn');
    const viewFrontendBtn = document.getElementById('view-frontend-btn');
    const serverLogs = document.getElementById('server-logs');
    const notificationEl = document.getElementById('notification');
    
    // Uptime counter
    let startTime = Date.now();
    
    function updateUptime() {
      const now = Date.now();
      const diff = now - startTime;
      const hours = Math.floor(diff / 3600000);
      const minutes = Math.floor((diff % 3600000) / 60000);
      const seconds = Math.floor((diff % 60000) / 1000);
      
      uptimeElement.textContent = `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
    }
    
    // Check server status
    async function checkServerStatus() {
      checkNowBtn.innerHTML = '<div class="spinner"></div> Checking...';
      
      try {
        // Try to hit the health endpoint
        const response = await fetch('/api/health');
        
        if (response.ok) {
          const data = await response.json();
          apiStatus.textContent = 'Online';
          apiStatus.className = 'status-value status-online';
          showNotification('Server is online and responding', 'success');
          
          // Update metrics with simulated data
          memoryUsageElement.textContent = `${(Math.random() * 100).toFixed(2)} MB`;
          responseTimeElement.textContent = `${(Math.random() * 200).toFixed(2)} ms`;
          requestCountElement.textContent = Math.floor(Math.random() * 1000);
        } else {
          throw new Error('Server returned error status');
        }
      } catch (error) {
        apiStatus.textContent = 'Offline';
        apiStatus.className = 'status-value status-offline';
        openaiStatus.textContent = 'Disconnected';
        openaiStatus.className = 'status-value status-offline';
        showNotification('Unable to connect to server', 'error');
      }
      
      lastCheckElement.textContent = new Date().toLocaleTimeString();
      checkNowBtn.innerHTML = '<i class="fas fa-sync-alt"></i> Check Status Now';
      
      // Add a log entry
      addLogEntry(`Server status checked at ${new Date().toLocaleTimeString()}`);
    }
    
    function addLogEntry(message) {
      const logEntry = document.createElement('div');
      logEntry.className = 'log-entry';
      logEntry.innerHTML = `<span class="log-time">[${new Date().toLocaleTimeString()}]</span> ${message}`;
      serverLogs.appendChild(logEntry);
      serverLogs.scrollTop = serverLogs.scrollHeight;
    }
    
    function showNotification(message, type) {
      notificationEl.textContent = message;
      notificationEl.className = `notification ${type}`;
      notificationEl.classList.add('show');
      
      setTimeout(() => {
        notificationEl.classList.remove('show');
      }, 3000);
    }
    
    // Event listeners
    checkNowBtn.addEventListener('click', checkServerStatus);
    viewFrontendBtn.addEventListener('click', () => {
      window.location.href = '/index.html'; // Your marketing content frontend
    });
    
    // Initialize
    setInterval(updateUptime, 1000);
    updateUptime();
    
    // Check status on page load
    setTimeout(checkServerStatus, 1000);
    
    // Simulate receiving logs
    setInterval(() => {
      const events = [
        'Content generation request received',
        'OpenAI API call completed',
        'New user session started',
        'Database query executed',
        'Cache updated',
        'Scheduled maintenance check'
      ];
      
      if (Math.random() > 0.7) {
        addLogEntry(events[Math.floor(Math.random() * events.length)]);
      }
    }, 5000);
  </script>
</body>
</html>
 
